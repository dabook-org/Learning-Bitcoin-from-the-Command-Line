<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>13_3_Empowering_Bitcoin_with_Scripts</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p># 13.3: Empowering Bitcoin with Scripts</p>
<p>Bitcoin Scripts can go far beyond the relatively simple financial
instruments detailed to date. They’re also the foundation of most
complex usages of the Bitcoin network, as demonstrated by these
real-world examples of off-chain functionality, drawn from the Lightning
Network examples in <a
href="https://github.com/bitcoin/bips/blob/master/bip-0112.mediawiki">BIP
112</a>.</p>
<h2 id="lock-for-the-lightning-network">Lock for the Lightning
Network</h2>
<p>The <a href="https://rusty.ozlabs.org/?p=450">Lightning Network</a>
is a payment channel that allows users to take funds off-chain and
engage in numerous microtransactions before finalizing the payment
channel and bringing the funds back into Bitcoin. Benefits include lower
fees and faster transaction speeds. It’s discussed in more detail, with
examples of how to use it from the command line, starting <a
href="19_0_Understanding_Your_Lightning_Setup.md">Chapter 19</a>.</p>
<p><a
href="https://github.com/bitcoin/bips/blob/master/bip-0112.mediawiki">BIP
112</a> contains a few examples of how these off-chain transactions
could be generated, using Bitcoin locking scripts.</p>
<h3 id="lock-with-revocable-commitment-transactions">Lock with Revocable
Commitment Transactions</h3>
<p>The trick with Lightning is the fact that it’s off-chain. To use
Lightning, participants jointly lock funds on the Bitcoin blockchain
with an n-of-n multisignature. Then, they engage in a number of
transactions between themselves. Each new “commitment transaction”
splits those joint funds in a different way; these transactions are
partially signed but <em>they aren’t put on the blockchain</em>.</p>
<p>If you have a mass of unpublished transactions, any of which
<em>could</em> be placed on the Blockchain, how do you keep one of the
participants from reverting back to an old transaction that’s more
beneficial to them? The answer is <em>revocation</em>. A simplified
example in BIP 112, which offers one of the stepping stones to
Lightning, shows how: you give the participant who would be harmed by
reversion to a revoked transaction the ability to reclaim the funds
himself if the the other participant illegitimately tries to use the
revoked transaction.</p>
<p>For example, presume that Alice and Bob update the commitment
transaction to give more of the funds to Bob (effectively: Alice sent
funds to Bob via the Lightning network). They partially sign new
transactions, but they also each offer up their own
<code>revokeCode</code> for previous transactions. This effectively
guarantees that they won’t publish previous transactions, because doing
so would allow their counterparty to claim those previous funds.</p>
<p>So what does the old transaction look like? It was a commitment
transaction showing funds intended for Alice, before she gave them to
Bob. It had a locking script as follows:</p>
<pre><code>OP_HASH160 
&lt;revokeHash&gt; 
OP_EQUAL
    
IF
        
    &lt;pubKeyBob&gt;
    
ELSE

    &lt;+24Hours&gt; 
    OP_CHECKSEQUENCEVERIFY 
    OP_DROP
    &lt;pubKeyAlice&gt;
    
ENDIF
OP_CHECKSIG</code></pre>
<p>The <code>ELSE</code> block is where Alice got her funds, after a
24-hour delay. However now it’s been superceded; that’s the whole point
of a Lightning-style payment channel, after all. In this situation, this
transaction should never be published. Bob has no incentive to because
he has a newer transaction, which benefits him more because he’s been
sent some of Alice’s funds. Alice has no incentive either, because she
loses the funds if she tries because of that <code>revokeCode</code>. So
no one puts the transaction onto the blockchain, and the off-chain
transactions continue.</p>
<p>It’s worth exploring how this script would work in a variety of
situations, most of which involve Alice trying to cheat by reverting to
this older transaction, which describes the funds <em>before</em> Alice
sent some of them to Bob.</p>
<h4 id="run-the-lock-script-for-cheating-alice-with-revocation-code">Run
the Lock Script for Cheating Alice, with Revocation Code</h4>
<p>Alice could try to use revocation code that she gave to Bob to
immediately claim the funds. She writes a locking script of
<code>&lt;sigAlice&gt; &lt;revokeCode&gt;</code>:</p>
<pre><code>Script: &lt;sigAlice&gt; &lt;revokeCode&gt; OP_HASH160 &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ ]

Script: OP_HASH160 &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ &lt;sigAlice&gt; &lt;revokeCode&gt; ]

Script: &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Running: &lt;revokeCode&gt; OP_HASH160 
Stack: [ &lt;sigAlice&gt; &lt;revokeHash&gt; ]

Script: OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ &lt;sigAlice&gt; &lt;revokeHash&gt; &lt;revokeHash&gt; ]

Script: IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Running: &lt;revokeHash&gt; &lt;revokeHash&gt; OP_EQUAL
Stack: [ &lt;sigAlice&gt; True ]</code></pre>
<p>The <code>OP_EQUAL</code> feeds the <code>IF</code> statement.
Because Alice uses the <code>revokeCode</code>, she gets into the branch
that allows her to redeem the funds immediately, collapsing the rest of
the script down to <code>&lt;pubKeyBob&gt;</code> (within the
conditional) and <code>OP_CHECKSIG</code> (afterward).</p>
<pre><code>Script: &lt;pubKeyBob&gt; OP_CHECKSIG
Running: True IF
Stack: [ &lt;sigAlice&gt; ]</code></pre>
<p>Curses! Only Bob can sign immediately using the
<code>redeemCode</code>!</p>
<pre><code>Script:  OP_CHECKSIG
Stack: [ &lt;sigAlice&gt; &lt;pubKeyBob&gt; ]

Script:
Running: &lt;sigAlice&gt; &lt;pubKeyBob&gt; OP_CHECKSIG
Stack: [ False ]</code></pre>
<h4
id="run-the-lock-script-for-cheating-alice-without-revocation-code">Run
the Lock Script for Cheating Alice, without Revocation Code</h4>
<p>So what if Alice instead tries to use her own signature, without the
<code>revokeCode</code>? She uses an unlocking script of
<code>&lt;sigAlice&gt; &lt;notRevokeCode&gt;</code>.</p>
<pre><code>Script: &lt;sigAlice&gt; 0 OP_HASH160 &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ ]

Script: OP_HASH160 &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ &lt;sigAlice&gt; 0 ]

Script: &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Running: 0 OP_HASH160 
Stack: [ &lt;sigAlice&gt; &lt;0Hash&gt; ]

Script: OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ &lt;sigAlice&gt; &lt;0Hash&gt; &lt;revokeHash&gt; ]

Script: IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Running: &lt;0Hash&gt; &lt;revokeHash&gt; OP_EQUAL
Stack: [ &lt;sigAlice&gt; False ]</code></pre>
<p>We now collapse down to the <code>ELSE</code> statement and what
comes after the conditional:</p>
<pre><code>Script: &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; OP_CHECKSIG
Running: False IF
Stack: [ &lt;sigAlice&gt; ]

Script: OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; OP_CHECKSIG
Stack: [ &lt;sigAlice&gt; &lt;+24Hours&gt; ]</code></pre>
<p>And then Alice is foiled again because 24 hours haven’t gone by!</p>
<pre><code>Script: OP_DROP &lt;pubKeyAlice&gt; OP_CHECKSIG
Running: &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY 
Stack: [ &lt;sigAlice&gt; &lt;+24Hours&gt; ] — Script EXITS</code></pre>
<h4 id="run-the-lock-script-for-victimized-bob">Run the Lock Script for
Victimized Bob</h4>
<p>What this means is that Bob has 24 hours to reclaim his funds if
Alice ever tries to cheat, using the <code>&lt;revokeCode&gt;</code> and
his signature as his unlocking script:</p>
<pre><code>Script: &lt;SigBob&gt; &lt;revokeCode&gt; OP_HASH160 &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ ]

Script: OP_HASH160 &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ &lt;SigBob&gt; &lt;revokeCode&gt; ]

Script: &lt;revokeHash&gt; OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Running: &lt;revokeCode&gt; OP_HASH160 
Stack: [ &lt;SigBob&gt; &lt;revokeHash&gt; ]

Script: OP_EQUAL IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Stack: [ &lt;SigBob&gt; &lt;revokeHash&gt; &lt;revokeHash&gt; ]

Script: IF &lt;pubKeyBob&gt; ELSE &lt;+24Hours&gt; OP_CHECKSEQUENCEVERIFY OP_DROP &lt;pubKeyAlice&gt; ENDIF OP_CHECKSIG
Running: &lt;revokeHash&gt; &lt;revokeHash&gt; OP_EQUAL
Stack: [ &lt;SigBob&gt; True ]

Script: &lt;pubKeyBob&gt; OP_CHECKSIG
Running: True IF
Stack: [ &lt;SigBob&gt; ]

Script:  OP_CHECKSIG
Stack: [ &lt;SigBob&gt; &lt;pubKeyBob&gt; ]

Script:
Running: &lt;SigBob&gt; &lt;pubKeyBob&gt; OP_CHECKSIG
Stack: [ True ]</code></pre>
<h4 id="run-the-lock-script-for-virtuous-alice">Run the Lock Script for
Virtuous Alice</h4>
<p>All of Alice’s commitment transactions are locked with this same
locking script, whether they’ve been revoked or not. That means that the
newest commitment transaction, which is the currently valid one, is
locked with it as well. Alice has never sent a newer transaction to Bob
and thus never sent him the previous <code>revokeCode</code>.</p>
<p>In this situation, she could virtuously publish the transaction,
closing down the proto-Lightning channel. She puts the transaction on
the chain and she waits 24 hours. Bob can’t do anything about it because
he doesn’t have the recovation code. Then, after the wait, Alice
reclaims her funds. (Bob does the same thing with his own final
commtiment transaction.)</p>
<h3 id="lock-with-hashed-time-lock-contracts">Lock with Hashed Time-Lock
Contracts</h3>
<p>The Revocable Commitment Transactions were just a stepping stone to
Lightning. The actual Lightning Network uses a more complex mechanism
called a <a
href="https://en.bitcoin.it/wiki/Hashed_Timelock_Contracts">hashed
timelock contract</a>, or HTLC.</p>
<p>The main purpose of HTLCs is to create a comprehensive network of
participants. Transactions are no longer just between a pair of
participants who have entered the network together, but can now be
between previously unassociated people. When funds are sent, a string of
transactions are created, each of them locked with a
<code>secretHash</code>. When the corresponding <code>secretCode</code>
is revealed, the entire string of transactions can be spent. This is
what allows singular transactions to actually become a network.</p>
<p>There’s also a bit more complexity in Lightning Network locking
scripts. There are separate locks for the sender and the recipient of
each transaction that are more widely divergent than the differing
commitment transactions alluded to in the previous section. We’re going
to show both of them, to demonstrate the power of these locking scripts,
but we’re not going to dwell on how they interact with each other.</p>
<h4 id="lock-the-recipients-transaction">Lock the Recipient’s
Transaction</h4>
<p>Once more, we’re going to start looking at Alice’s commitment
transaction, which shows funds that she’s received:</p>
<pre><code>OP_HASH160 
OP_DUP 
&lt;secretHash&gt; 
OP_EQUAL
    
IF

    &lt;+24Hours&gt;
    OP_CHECKSEQUENCEVERIFY
    OP_2DROP
    &lt;pubKeyAlice&gt;
    
ELSE

    &lt;revokeHash&gt; 
    OP_EQUAL
        
    OP_NOTIF
            
        &lt;Date&gt; 
        OP_CHECKLOCKTIMEVERIFY 
        OP_DROP
        
    ENDIF
        
    &lt;pubKeyBob&gt;
    
ENDIF
    
OP_CHECKSIG</code></pre>
<p>The key to these new HTLCs is the <code>secretHash</code>, which we
said is what allows a transaction to span the network. When the
transaction has spanned from its originator to its intended recipient,
the <code>secretCode</code> is revealed, which allows all the
participants to create a <code>secretHash</code> and unlock the whole
network of payments.</p>
<p>After the <code>secretCode</code> has been revealed, the
<code>IF</code> branch opens up: Alice can claim the funds 24 hours
after the transaction is put on the Bitcoin network.</p>
<p>However, there’s also the opportunity for Bob to reclaim his funds,
which appears in the <code>ELSE</code> branch. He can do so if the
transaction has been revoked (but Alice puts it on the blockchain
anyway), <em>or if</em> an absolute timeout has occurred.</p>
<h4 id="lock-the-senders-transaction">Lock the Sender’s Transaction</h4>
<p>Here’s the alternative commitment transaction locking script used by
the sender:</p>
<pre><code>OP_HASH160 
OP_DUP 
&lt;secretHash&gt;
OP_EQUAL
OP_SWAP 
&lt;revokeHash&gt; 
OP_EQUAL 
OP_ADD
   
IF

    &lt;pubKeyAlice&gt;

ELSE

    &lt;Date&gt;
    OP_CHECKLOCKTIMEVERIFY
    &lt;+24Hours&gt;
    OP_CHECKSEQUENCEVERIFY
    OP_2DROP
    &lt;pubKeyBob&gt;

ENDIF
OP_CHECKSIG</code></pre>
<p>The initial part of their Script is quite clever and so worth
running:</p>
<pre><code>Initial Script: &lt;suppliedCode&gt; OP_HASH160 OP_DUP &lt;secretHash&gt; OP_EQUAL OP_SWAP &lt;revokeHash&gt; OP_EQUAL OP_ADD
Stack: [ ]

Initial Script: OP_HASH160 OP_DUP &lt;secretHash&gt; OP_EQUAL OP_SWAP &lt;revokeHash&gt; OP_EQUAL OP_ADD
Stack: [ &lt;suppliedCode&gt; ]

Initial Script: OP_DUP &lt;secretHash&gt; OP_EQUAL OP_SWAP &lt;revokeHash&gt; OP_EQUAL OP_ADD
Running: &lt;suppliedCode&gt; OP_HASH160 
Stack: [ &lt;suppliedHash&gt; ]

Initial Script: &lt;secretHash&gt; OP_EQUAL OP_SWAP &lt;revokeHash&gt; OP_EQUAL OP_ADD
Running: &lt;suppliedHash&gt; OP_DUP 
Stack: [ &lt;suppliedHash&gt; &lt;suppliedHash&gt; ]

Initial Script: OP_EQUAL OP_SWAP &lt;revokeHash&gt; OP_EQUAL OP_ADD
Stack: [ &lt;suppliedHash&gt; &lt;suppliedHash&gt; &lt;secretHash&gt; ]

Initial Script: OP_SWAP &lt;revokeHash&gt; OP_EQUAL OP_ADD
Running: &lt;suppliedHash&gt; &lt;secretHash&gt; OP_EQUAL
Stack: [ &lt;suppliedHash&gt; &lt;wasItSecretHash?&gt; ]

Initial Script: &lt;revokeHash&gt; OP_EQUAL OP_ADD
Running: &lt;suppliedHash&gt; &lt;wasItSecretHash?&gt; OP_SWAP
Stack: [ &lt;wasItSecretHash?&gt; &lt;suppliedHash&gt; ]

Initial Script: OP_EQUAL OP_ADD
Stack: [ &lt;wasItSecretHash?&gt; &lt;suppliedHash&gt; &lt;revokeHash&gt; ]

Initial Script: OP_ADD
Running: &lt;suppliedHash&gt; &lt;revokeHash&gt; OP_EQUAL
Stack: [ &lt;wasItSecretHash?&gt; &lt;wasItRevokeHash?&gt; ]

Initial Script: 
Running: &lt;wasItSecretHash?&gt; &lt;wasItRevokeHash?&gt; OP_ADD
Stack: [ &lt;wasItSecretOrRevokeHash?&gt; ]</code></pre>
<p>Running through the script reveals that the initial checks, above the
<code>IF</code>/<code>ELSE</code>/<code>ENDIF</code>, determine if the
hash was <em>either</em> the <code>secretCode</code> <em>or</em> the
<code>revokeCode</code>. If so, Alice can take the funds in the first
block. If not, Bob can take the funds, but only after Alice has had her
chance and after both the 24 hour timeout and the absolute timeout have
passed.</p>
<h4 id="understand-htlcs">Understand HTLCs</h4>
<p>HTLCs are quite complex, and this overview doesn’t try to explain all
of their intricacies. Rusty Russell’s <a
href="https://rusty.ozlabs.org/?p=462">overview</a> explains more, and
there’s even more detail in his <a
href="https://github.com/ElementsProject/lightning/blob/master/doc/deployable-lightning.pdf">Deployable
Lightning</a> paper. But don’t worry if some of the intricacies still
escape you, particularly the interrelations of the two scripts.</p>
<p>For the purposes of this tutorial, there are two important lessons
for HTLCs:</p>
<ul>
<li>Understand that a very complex structure like an HTLC can be created
with Bitcoin Script.</li>
<li>Analyze how to run each of the HTLC scripts.</li>
</ul>
<p>It’s worth your time running each of the two HTLC scripts through
each of its permutations, one stack item at a time.</p>
<h2 id="summary-empowering-bitcoin-with-scripts">Summary: Empowering
Bitcoin with Scripts</h2>
<p>We’re closing our examination of Bitcoin Scripts with a look at how
truly powerful they can be. In 20 opcodes or less, a Bitcoin Script can
form the basis of an entire off-chain payment channel. Similarly,
two-way pegged sidechains are the product of less than twenty opcodes,
as also briefly noted in <a
href="https://github.com/bitcoin/bips/blob/master/bip-0112.mediawiki">BIP
112</a>.</p>
<p>If you’ve ever seen complex Bitcoin functionality or Bitcoin-adjacent
systems, they were probably built on Bitcoin Scripts. And now you have
all the tools to do the same yourself.</p>
<h2 id="whats-next">What’s Next?</h2>
<p>Move on to “Using Tor” with <a href="14_0_Using_Tor.md">Chapter
Fourteen: Using Tor</a>.</p>
<p>Or, if you prefer, there are two alternate paths:</p>
<p>If you want to stay focused on Bitcoin, move on to “Programming with
RPC” with <a href="16_0_Talking_to_Bitcoind.md">Chapter Sixteen: Talking
to Bitcoind with C</a>.</p>
<p>Or, if you want to stay focused on the command-line because you’re
not a programmer, you can skip to <a
href="19_0_Understanding_Your_Lightning_Setup.md">Chapter Nineteen:
Understanding Your Lightning Setup</a> to continue your command-line
education with the Lightning Network.</p>
</body>
</html>
