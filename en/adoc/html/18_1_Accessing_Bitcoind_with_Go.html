<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>18.1: Accessing Bitcoind with Go</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article data-line-1">
<div id="header">
<h1>18.1: Accessing Bitcoind with Go</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock data-line-3">
<blockquote>
<div class="paragraph data-line-5">
<p>Caveat reader.</p>
</div>
</blockquote>
</div>
<div class="paragraph data-line-8">
<p>This section explains how to interact with <code>bitcoind</code> using the Go programming language and the <a href="https://github.com/btcsuite/btcd/tree/master/rpcclient" data-href="https://github.com/btcsuite/btcd/tree/master/rpcclient">btcd rpcclient</a>.
Note that it has some quirks and some limitations.</p>
</div>
</div>
</div>
<div class="sect1 data-line-11">
<h2 id="_set_up_go">Set Up Go</h2>
<div class="sectionbody">
<div class="paragraph data-line-13">
<p>To prepare for Go usage on your UNIX machine,  first install curl if you haven&#8217;t already:</p>
</div>
<div class="literalblock data-line-15">
<div class="content">
<pre>$ sudo apt install curl</pre>
</div>
</div>
<div class="paragraph data-line-17">
<p>Then, look at the <a href="https://golang.org/dl/" data-href="https://golang.org/dl/">Go downloads page</a>, get the link for the latest download, and download it using <code>curl</code>.
For a Debian setup, you will want to use the <code>linux-amd64</code> version:</p>
</div>
<div class="literalblock data-line-20">
<div class="content">
<pre>$ curl -O https://dl.google.com/go/go1.15.1.linux-amd64.tar.gz</pre>
</div>
</div>
<div class="paragraph data-line-22">
<p>Once it finishes downloading, compare the hash of the download to the hash on the <a href="https://golang.org/dl/" data-href="https://golang.org/dl/">Go downloads page</a>:</p>
</div>
<div class="literalblock data-line-24">
<div class="content">
<pre>$ sha256sum go1.15.1.linux-amd64.tar.gz
70ac0dbf60a8ee9236f337ed0daa7a4c3b98f6186d4497826f68e97c0c0413f6  go1.15.1.linux-amd64.tar.gz</pre>
</div>
</div>
<div class="paragraph data-line-27">
<p>The hashes should match.
If so, extract the tarball and install Go on your system:</p>
</div>
<div class="literalblock data-line-30">
<div class="content">
<pre>$ tar xfv go1.15.1.linux-amd64.tar.gz
$ sudo chown -R root:root ./go
$ sudo mv go /usr/local</pre>
</div>
</div>
<div class="paragraph data-line-34">
<p>Now you need to create a Go path to specify your environment.
Open the <code>~/.profile</code> file with an editor of your choice and add the following to the end of it:</p>
</div>
<div class="listingblock data-line-37">
<div class="content">
<pre>export GOPATH=$HOME/work
export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin</pre>
</div>
</div>
<div class="paragraph data-line-42">
<p>Then, refresh your profile:</p>
</div>
<div class="literalblock data-line-44">
<div class="content">
<pre>$ source ~/.profile</pre>
</div>
</div>
<div class="paragraph data-line-46">
<p>Lastly, create the directory for your Go workspace:</p>
</div>
<div class="literalblock data-line-48">
<div class="content">
<pre>$ mkdir $HOME/work</pre>
</div>
</div>
<div class="sect2 data-line-50">
<h3 id="_set_up_btcd_rpcclient">Set Up <code>btcd</code> <code>rpcclient</code></h3>
<div class="paragraph data-line-52">
<p>You&#8217;ll be using the <code>rpcclient</code> that comes with <code>btcd,</code> a Bitcoin implementation written in Go.
Although <code>rpcclient</code> was originally designed to work with the <code>btcd</code> Bitcoin full node, it also works with Bitcoin Core.
It has some quirks which we will be looking at.</p>
</div>
<div class="paragraph data-line-56">
<p>You can use <code>go get</code> to download it:</p>
</div>
<div class="literalblock data-line-58">
<div class="content">
<pre>$ go get github.com/btcsuite/btcd/rpcclient</pre>
</div>
</div>
<div class="paragraph data-line-60">
<p>To test that it works, navigate to the directory with the Bitcoin Core examples:</p>
</div>
<div class="literalblock data-line-62">
<div class="content">
<pre>$ cd $GOPATH/src/github.com/btcsuite/btcd/rpcclient/examples/bitcoincorehttp</pre>
</div>
</div>
<div class="paragraph data-line-64">
<p>Modify the <code>main.go</code> file and enter the details associated with your Bitcoin core setup, which can be found in ` ~/.bitcoin/bitcoin.conf`:</p>
</div>
<div class="listingblock data-line-66">
<div class="content">
<pre>		Host:         "localhost:18332",
		User:         "StandUp",
		Pass:         "6305f1b2dbb3bc5a16cd0f4aac7e1eba",</pre>
</div>
</div>
<div class="quoteblock data-line-72">
<blockquote>
<div class="paragraph data-line-73">
<p><strong>MAINNET VS TESTNET:</strong> The port would be 8332 for a mainnet setup.</p>
</div>
</blockquote>
</div>
<div class="paragraph data-line-76">
<p>You can now run a test:</p>
</div>
<div class="literalblock data-line-78">
<div class="content">
<pre>$ go run main.go</pre>
</div>
</div>
<div class="paragraph data-line-80">
<p>You should see the block count printed:</p>
</div>
<div class="listingblock data-line-82">
<div class="content">
<pre>2020/09/01 11:41:24 Block count: 1830861</pre>
</div>
</div>
</div>
<div class="sect2 data-line-86">
<h3 id="_create_a_rpcclient_project">Create a <code>rpcclient</code> Project</h3>
<div class="paragraph data-line-88">
<p>You will typically be creating projects in your <code>~/work/src/myproject/bitcoin</code> directory:</p>
</div>
<div class="literalblock data-line-90">
<div class="content">
<pre>$ mkdir -p ~/work/src/myproject/bitcoin
$ cd ~/work/src/myproject/bitcoin</pre>
</div>
</div>
<div class="paragraph data-line-93">
<p>Each project should have the following <code>imports</code>:</p>
</div>
<div class="listingblock data-line-95">
<div class="content">
<pre>import (
	"log"
	"fmt"
	"github.com/btcsuite/btcd/rpcclient"
)</pre>
</div>
</div>
<div class="paragraph data-line-103">
<p>This <code>import</code> declaration allows you to import relevant libraries.
For every example here, you will need to import <code>"log", "fmt"</code> and <code>"github.com/btcsuite/btcd/rpcclient"</code>.
You may need to import additional libraries for some examples.</p>
</div>
<div class="ulist data-line-107">
<ul>
<li class="data-line-107">
<p><code>log</code> is used for printing out error messages.
After each time the Bitcoin node is called, an <code>if</code> statement will check if there are any errors.
If there are errors, <code>log</code> is used to print them out.</p>
</li>
<li class="data-line-110">
<p><code>fmt</code> is used for printing out output.</p>
</li>
<li class="data-line-111">
<p><code>rpcclient</code> is obviously the <code>rpcclient</code> library</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-113">
<h2 id="_build_your_connection">Build Your Connection</h2>
<div class="sectionbody">
<div class="paragraph data-line-115">
<p>Every <code>bitcoind</code> function in Go begins with creating the RPC connection, using the <code>ConnConfig</code> function:</p>
</div>
<div class="listingblock data-line-117">
<div class="content">
<pre>	connCfg := &amp;rpcclient.ConnConfig{
		Host:         "localhost:18332",
		User:         "StandUp",
		Pass:         "431451790e3eee1913115b9dd2fbf0ac",
		HTTPPostMode: true,
		DisableTLS:   true,
	}
	client, err := rpcclient.New(connCfg, nil)
	if err != nil {
		log.Fatal(err)
	}
	defer client.Shutdown()</pre>
</div>
</div>
<div class="paragraph data-line-132">
<p>The <code>connCfg</code> parameters allow you to choose the Bitcoin RPC port, username, password and whether you are on testnet or mainnet.</p>
</div>
<div class="quoteblock data-line-134">
<blockquote>
<div class="paragraph data-line-135">
<p><strong>NOTE:</strong> Again, be sure to substitute the <code>User</code> and <code>Pass</code> with the one found in your <code>~/.bitcoin/bitcon.conf</code>.</p>
</div>
</blockquote>
</div>
<div class="paragraph data-line-138">
<p>The<code>rpcclient.New(connCfg, nil)</code> function then configures <code>client</code> to connect to your Bitcoin node.</p>
</div>
<div class="paragraph data-line-140">
<p>The <code>defer client.Shutdown()</code> line is for disconnecting from your Bitcoin node, once the <code>main()</code> function finishes executing.
After the <code>defer client.Shutdown()</code> line is where the exciting stuff goes&#8201;&#8212;&#8201;and it will be pretty easy to use.
That&#8217;s&#8217;s because <code>rpcclient</code> helpfully turns the <code>bitcoin-cli</code> commands into functions using PascalCase.
For example, <code>bitcoin-cli getblockcount</code> will be <code>client.GetBlockCount</code> in Go.</p>
</div>
<div class="sect2 data-line-145">
<h3 id="_make_an_rpc_call">Make an RPC Call</h3>
<div class="paragraph data-line-147">
<p>All that&#8217;s required now is to make an informational call like <code>GetBlockCount</code> or <code>GetBlockHash</code> using your <code>client</code>:</p>
</div>
<div class="listingblock data-line-149">
<div class="content">
<pre>	blockCount, err := client.GetBlockCount()
	if err != nil {
		log.Fatal(err)
	}
	blockHash, err := client.GetBlockHash(blockCount)
	if err != nil {
		log.Fatal(err)
	}

	fmt.Printf("%d\n", blockCount)
	fmt.Printf("%s\n", blockHash.String())</pre>
</div>
</div>
</div>
<div class="sect2 data-line-163">
<h3 id="_make_an_rpc_call_with_arguments">Make an RPC Call with Arguments</h3>
<div class="paragraph data-line-165">
<p>The <code>rpcclient</code> functions can take inputs as well;
for example <code>client.GetBlockHash(blockCount)</code> takes the block count as an input.
The <code>client.GetBlockHash(blockCount)</code> from above would look like this as a <code>bitcoin-cli</code> command:</p>
</div>
<div class="literalblock data-line-169">
<div class="content">
<pre>$ bitcoin-cli getblockhash 1830868
00000000000002d53b6b9bba4d4e7dc44a79cebd1024d1bcfb9b3cc07d6cad9c</pre>
</div>
</div>
<div class="paragraph data-line-172">
<p>However, a quirk with hashes in <code>rpcclient</code> is that they will typically print in a different encoding if you were to print then normally with <code>blockHash</code>.
In order to print them as a string, you need to use <code>blockHash.String()</code>.</p>
</div>
</div>
<div class="sect2 data-line-175">
<h3 id="_run_your_code">Run Your Code</h3>
<div class="paragraph data-line-177">
<p>You can download the complete code from the <a href="src/18_1_blockinfo.go" data-href="src/18_1_blockinfo.go">src directory</a>.</p>
</div>
<div class="paragraph data-line-179">
<p>You can then run:</p>
</div>
<div class="literalblock data-line-181">
<div class="content">
<pre>$ go run blockinfo.go
1830868
00000000000002d53b6b9bba4d4e7dc44a79cebd1024d1bcfb9b3cc07d6cad9c</pre>
</div>
</div>
<div class="paragraph data-line-185">
<p>The latest block number along with its hash should be printed out.</p>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-187">
<h2 id="_look_up_funds">Look up Funds</h2>
<div class="sectionbody">
<div class="paragraph data-line-189">
<p>Due to limitations of the <code>btcd</code> <code>rpcclient</code>, you can&#8217;t make a use of the <code>getwalletinfo</code> function.
However, you can make use of the <code>getbalance</code> RPC:</p>
</div>
<div class="listingblock data-line-192">
<div class="content">
<pre>	wallet, err := client.GetBalance("*")
	if err != nil {
		log.Fatal(err)
	}

	fmt.Println(wallet)</pre>
</div>
</div>
<div class="paragraph data-line-201">
<p><code>client.GetBalance("<strong>")</code> requires the <code>"</strong>"</code> input, due to a quirk with <code>btcd</code>.
The asterisk signifies that you want to get the balance of all of your wallets.</p>
</div>
<div class="paragraph data-line-204">
<p>If you run <a href="src/18_1_getbalance.go" data-href="src/18_1_getbalance.go">the src code</a>, you should get an output similar to this:</p>
</div>
<div class="literalblock data-line-206">
<div class="content">
<pre>$ go run getbalance.go
0.000689 BTC</pre>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-209">
<h2 id="_create_an_address">Create an Address</h2>
<div class="sectionbody">
<div class="paragraph data-line-211">
<p>You can generate addresses in Go, but you can&#8217;t specify the address type:</p>
</div>
<div class="paragraph data-line-213">
<p>This requires the use of a special <code>chaincfg</code> function, to specify which network the addresses are being created for.
This specification is only required during address generation, which is why it is only used in this example.
You can include this in other examples as well, but it isn&#8217;t necessary.</p>
</div>
<div class="paragraph data-line-217">
<p>Be sure to import <code>"github.com/btcsuite/btcd/chaincfg"</code>:</p>
</div>
<div class="listingblock data-line-219">
<div class="content">
<pre>import (
	"log"
	"fmt"
	"github.com/btcsuite/btcd/rpcclient"
	"github.com/btcsuite/btcd/chaincfg"
)</pre>
</div>
</div>
<div class="paragraph data-line-228">
<p>Then call <code>connCfG</code> with the <code>chaincfg.TestNet3Params.Name</code> parameter:</p>
</div>
<div class="listingblock data-line-230">
<div class="content">
<pre>	connCfg := &amp;rpcclient.ConnConfig{
		Host:         "localhost:18332",
		User:         "bitcoinrpc",
		Pass:         "431451790e3eee1913115b9dd2fbf0ac",
		HTTPPostMode: true,
		DisableTLS:   true,
		Params: chaincfg.TestNet3Params.Name,
	}
	client, err := rpcclient.New(connCfg, nil)
	if err != nil {
		log.Fatal(err)
	}
	defer client.Shutdown()</pre>
</div>
</div>
<div class="quoteblock data-line-246">
<blockquote>
<div class="paragraph data-line-247">
<p><strong>MAINNET VS TESTNET:</strong> <code>Params: chaincfg.TestNet3Params.Name,</code> should be <code>Params: chaincfg.MainNetParams.Name,</code> on mainnet.</p>
</div>
</blockquote>
</div>
<div class="paragraph data-line-250">
<p>You can then create your address:</p>
</div>
<div class="listingblock data-line-252">
<div class="content">
<pre>	address, err := client.GetNewAddress("")
	if err != nil {
		log.Fatal(err)
	}
	fmt.Println(address)</pre>
</div>
</div>
<div class="paragraph data-line-260">
<p>A quirk with <code>client.GetNewAddress("")</code> is that an empty string needs to be included for it to work.</p>
</div>
<div class="paragraph data-line-262">
<p>Running <a href="17_1_getaddress.go" data-href="17_1_getaddress.go">the source</a> produces the following results:</p>
</div>
<div class="literalblock data-line-264">
<div class="content">
<pre>$ go run getaddress.go
tb1qutkcj34pw0aq7n9wgp3ktmz780szlycwddfmza</pre>
</div>
</div>
<div class="sect2 data-line-267">
<h3 id="_decode_an_address">Decode an Address</h3>
<div class="paragraph data-line-269">
<p>Creating an address took a look extra work, in specifying the appropiate chain.
Using an address also will because you&#8217;ll have to decode it prior to use.</p>
</div>
<div class="paragraph data-line-272">
<p>The means that you&#8217;ll have to import both the <code>"github.com/btcsuite/btcutil"</code> and <code>"github.com/btcsuite/btcd/chaincfg"</code> libraries.</p>
</div>
<div class="ulist data-line-274">
<ul>
<li class="data-line-274">
<p><code>btcutil</code> allows for a Bitcoin address to be decoded in a way that the<code>rpcclient</code> can understand.
This is necessary when working with addresses in <code>rpcclient</code>.</p>
</li>
<li class="data-line-276">
<p><code>chaincfg</code> is (again) used to configure your chain as the Testnet chain.
This is necessary for address decoding since the addresses used on Mainnet and Testnet are different.</p>
<div class="listingblock data-line-279">
<div class="content">
<pre>import (
    "log"
    "fmt"
    "github.com/btcsuite/btcd/rpcclient"
    "github.com/btcsuite/btcutil"
    "github.com/btcsuite/btcd/chaincfg"
)</pre>
</div>
</div>
<div class="paragraph data-line-289">
<p>The defaultNet variable is now used to specify whether your Bitcoin node is on testnet or on mainnet.
That information (and the <code>btcutil</code> object) is then used to decode the address.</p>
</div>
</li>
</ul>
</div>
<div class="quoteblock data-line-292">
<blockquote>
<div class="paragraph data-line-293">
<p><strong>MAINNET VS TESTNET:</strong> <code>&amp;chaincfg.TestNet3Params</code> should be <code>&amp;chaincfg.MainNetParams</code> on mainnet.</p>
</div>
</blockquote>
</div>
<div class="listingblock data-line-296">
<div class="content">
<pre>	defaultNet := &amp;chaincfg.TestNet3Params
	addr, err := btcutil.DecodeAddress("mpGpCMX6SuUimDZKiVViuhd7EGyVxkNnha", defaultNet)
	if err != nil {
		log.Fatal(err)
	}</pre>
</div>
</div>
<div class="quoteblock data-line-304">
<blockquote>
<div class="paragraph data-line-305">
<p><strong>NOTE:</strong> Change the address (<code>mpGpCMX6SuUimDZKiVViuhd7EGyVxkNnha</code>) for one actually your wallet;
you can use <code>bitcoin-cli listunspent</code> to find some addresses with funds for this test.
If you want to be really fancy, modify the Go code to take an argument, then write a script that runs <code>listunspent</code>, saves the info to a variable, and runs the Go code on that.</p>
</div>
</blockquote>
</div>
<div class="paragraph data-line-310">
<p>Only afterward do you use the <code>getreceivedbyaddress</code> RPC, on your decoded address:</p>
</div>
<div class="listingblock data-line-312">
<div class="content">
<pre>	wallet, err := client.GetReceivedByAddress(addr)
	if err != nil {
		log.Fatal(err)
	}

	fmt.Println(wallet)</pre>
</div>
</div>
<div class="paragraph data-line-321">
<p>When you run <a href="src/18_1_getamountreceived.go" data-href="src/18_1_getamountreceived.go">the code</a>, you should get output similar to:</p>
</div>
<div class="literalblock data-line-323">
<div class="content">
<pre>$ go run getamountreceived.go
0.0085 BTC</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-326">
<h2 id="_send_a_transaction">Send a Transaction</h2>
<div class="sectionbody">
<div class="paragraph data-line-328">
<p>You&#8217;ve now got all the puzzle pieces in place to send a transaction.
You&#8217;re going to want to:</p>
</div>
<div class="olist arabic data-line-331">
<ol class="arabic">
<li class="data-line-331">
<p>Import the correct libraries, including <code>chaincfg</code> to specify a network and <code>btcutil</code> to decode an address.</p>
</li>
<li class="data-line-332">
<p>Choose an address to send to.</p>
</li>
<li class="data-line-333">
<p>Decode that address.</p>
</li>
<li class="data-line-334">
<p>Run <code>sendtoaddress</code> to send funds the easy way.</p>
</li>
</ol>
</div>
<div class="listingblock data-line-335">
<div class="content">
<pre class="highlight"><code class="language-package main" data-lang="package main">import ( 	"log" 	"fmt" 	"github.com/btcsuite/btcd/rpcclient" 	"github.com/btcsuite/btcutil" 	"github.com/btcsuite/btcd/chaincfg" )

func main() { 	connCfg := &amp;rpcclient.ConnConfig{ 		Host:         "localhost:18332", 		User:         "StandUp", 		Pass:         "431451790e3eee1913115b9dd2fbf0ac", 		HTTPPostMode: true, 		DisableTLS:   true, 	} 	client, err := rpcclient.New(connCfg, nil) 	if err != nil { 		log.Fatal(err) 	} 	defer client.Shutdown()

....
defaultNet := &amp;chaincfg.TestNet3Params
addr, err := btcutil.DecodeAddress("n2eMqTT929pb1RDNuqEnxdaLau1rxy3efi", defaultNet)
if err != nil {
	log.Fatal(err)
}
sent, err := client.SendToAddress(addr, btcutil.Amount(1e4))
if err != nil {
	log.Fatal(err)
}

fmt.Println(sent) } ``` When you run [the code](src/18_1_sendtransaction.go), the txid of the transaction is outputted:
....
 $ go run sendtransaction.go
 9aa4cd6559e0d69059eae142c35bfe78b71a8084e1fcc2c74e2a9675e9e7489d

=== Look Up a Transaction

To lookup a transaction, such as the one you just sent, you'll need to once again do some conversions, this time of txid.
`"github.com/btcsuite/btcd/chaincfg/chainhash"` is imported in order to allow hashes to be stored in the Go code.
`chainhash.NewHashFromStr("hash")` converts a hash in a string to a format that works with rpcclient.

----
package main

import (
	"log"
	"fmt"
	"github.com/btcsuite/btcd/rpcclient"
	"github.com/btcsuite/btcd/chaincfg/chainhash"
)

func main() {
	connCfg := &amp;rpcclient.ConnConfig{
		Host:         "localhost:18332",
		User:         "StandUp",
		Pass:         "431451790e3eee1913115b9dd2fbf0ac",
		HTTPPostMode: true,
		DisableTLS:   true,
	}
	client, err := rpcclient.New(connCfg, nil)
	if err != nil {
		log.Fatal(err)
	}
	defer client.Shutdown()

	chash, err := chainhash.NewHashFromStr("1661ce322c128e053b8ea8fcc22d17df680d2052983980e2281d692b9b4ab7df")
	if err != nil {
		log.Fatal(err)
	}
	transactions, err := client.GetTransaction(chash)
	if err != nil {
		log.Fatal(err)
	}

	fmt.Println(transactions)
}
----

____
*NOTE:* Again, you'll want to change out the txid for one actually recognized by your system.
____

When you run link:17_1_lookuptransaction.go[the code] it will print out the details associated with a transaction, such as its amount and how many times it has been confirmed:

 $ go run lookuptransaction.go
 {
   "amount": 0.00100000,
   "confirmations": 4817,
   "blockhash": "000000006628870b0a8a66abea9cf0d4e815c491f079e3fa9e658a87b5dc863a",
   "blockindex": 117,
   "blocktime": 1591857418,
   "txid": "1661ce322c128e053b8ea8fcc22d17df680d2052983980e2281d692b9b4ab7df",
   "walletconflicts": [
   ],
   "time": 1591857343,
   "timereceived": 1591857343,
   "bip125-replaceable": "no",
   "details": [
     {
       "address": "mpGpCMX6SuUimDZKiVViuhd7EGyVxkNnha",
       "category": "receive",
       "amount": 0.00100000,
       "label": "",
       "vout": 0
     }
   ],
   "hex": "02000000000101e9e8c3bd057d54e73baadc60c166860163b0e7aa60cab33a03e89fb44321f8d5010000001716001435c2aa3fc09ea53c3e23925c5b2e93b9119b2568feffffff02a0860100000000001976a914600c8c6a4abb0a502ea4de01681fe4fa1ca7800688ac65ec1c000000000017a91425b920efb2fde1a0277d3df11d0fd7249e17cf8587024730440220403a863d312946aae3f3ef0a57206197bc67f71536fb5f4b9ca71a7e226b6dc50220329646cf786cfef79d60de3ef54f702ab1073694022f0618731902d926918c3e012103e6feac9d7a8ad1ac6b36fb4c91c1c9f7fff1e7f63f0340e5253a0e4478b7b13f41fd1a00"
 }

== Summary: Accessing Bitcoind with Go

Although the `btcd` `rpcclient` has some limits, you can still perform the main RPC commands in Go.
The documentation for `rpcclient` is available on https://godoc.org/github.com/btcsuite/btcd/rpcclient[Godoc].
If the documentation doesn't have what you're looking for, also consult the https://github.com/btcsuite/btcd[btcd repository].
It is generally well documented and easy to read.
Based on these examples you should be able to incorporate Bitcoin in a Go project and do things like send and receive coins.

== What's Next?

Learn more about "Talking to Bitcoin in Other Languages" in xref:18_2_Accessing_Bitcoind_with_Java.adoc[18.2: Accessing Bitcoin with Java].</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-06-11 10:07:21 -0400
</div>
</div>
</body>
</html>