<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>03_1_Verifying_Your_Bitcoin_Setup</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="verifying-your-bitcoin-setup">3.1: Verifying Your Bitcoin
Setup</h1>
<p>Before you start playing with Bitcoin, you should ensure that
everything is setup correctly.</p>
<h2 id="create-your-aliases">Create Your Aliases</h2>
<p>We suggest creating some aliases to make it easier to use
Bitcoin.</p>
<p>You can do so by putting them in your <code>.bash_profile</code>,
<code>.bashrc</code> or <code>.profile</code>.</p>
<pre><code>cat &gt;&gt; ~/.bash_profile &lt;&lt;EOF
alias btcdir=&quot;cd ~/.bitcoin/&quot; #linux default bitcoind path
alias bc=&quot;bitcoin-cli&quot;
alias bd=&quot;bitcoind&quot;
alias btcinfo=&#39;bitcoin-cli getwalletinfo | egrep &quot;\&quot;balance\&quot;&quot;; bitcoin-cli getnetworkinfo | egrep &quot;\&quot;version\&quot;|connections&quot;; bitcoin-cli getmininginfo | egrep &quot;\&quot;blocks\&quot;|errors&quot;&#39;
EOF</code></pre>
<p>After you enter these aliases you can either
<code>source .bash_profile</code> to input them or just log out and back
in.</p>
<p>Note that these aliases includes shortcuts for running
<code>bitcoin-cli</code>, for running <code>bitcoind</code>, and for
going to the Bitcoin directory. These aliases are mainly meant to make
your life easier. We suggest you create other aliases to ease your use
of frequent commands (and arguments) and to minimize errors. Aliases of
this sort can be even more useful if you have a complex setup where you
regularly run commands associated with Mainnet, with Testnet,
<em>and</em> with Regtest, as explained further below.</p>
<p>With that said, use of these aliases in <em>this</em> document might
accidentally obscure the core lessons being taught about Bitcoin, so the
only alias directly used here is <code>btcinfo</code> because it
encapsulates much longer and more complex command. Otherwise, we show
the full commands; adjust for your own use as appropriate.</p>
<h2 id="run-bitcoind">Run Bitcoind</h2>
<p>You’ll begin your exploration of the Bitcoin network with the
<code>bitcoin-cli</code> command. However, bitcoind <em>must</em> be
running to use bitcoin-cli, as bitcoin-cli sends JSON-RPC commands to
the bitcoind. If you used our standard setup, bitcoind should already be
up and running. You can double check by looking at the process
table.</p>
<pre><code>$ ps auxww | grep bitcoind
standup    455  1.3 34.4 3387536 1392904 ?     SLsl Jun16  59:30 /usr/local/bin/bitcoind -conf=/home/standup/.bitcoin/bitcoin.conf</code></pre>
<p>If it’s not running, you’ll want to run
<code>/usr/local/bin/bitcoind -daemon</code> by hand and also place it
in your crontab.</p>
<h2 id="verify-your-blocks">Verify Your Blocks</h2>
<p>You should have the whole blockchain downloaded before you start
playing. Just run the <code>bitcoin-cli getblockcount</code> alias to
see if it’s all loaded.</p>
<pre><code>$ bitcoin-cli getblockcount
1772384</code></pre>
<p>That tells you what’s loaded; you’ll then need to check that against
an online service that tells you the current block height.</p>
<blockquote>
<p>:book: <strong><em>What is Block Height?</em></strong> Block height
is the the distance that a particular block is removed from the genesis
block. The current block height is the block height of the newest block
added to a blockchain.</p>
</blockquote>
<p>You can do this by looking at a blocknet explorer, such as <a
href="https://live.blockcypher.com/btc-testnet/">the Blockcypher Testnet
explorer</a>. Does its most recent number match your
<code>getblockcount</code>? If so, you’re up to date.</p>
<p>If you’d like an alias to look at everything at once, the following
currently works for Testnet, but may disappear at some time in the
future:</p>
<pre><code>$ cat &gt;&gt; ~/.bash_profile &lt;&lt; EOF
alias btcblock=&quot;echo \\\`bitcoin-cli -testnet getblockcount 2&gt;&amp;1\\\`/\\\`wget -O - https://blockstream.info/testnet/api/blocks/tip/height 2&gt; /dev/null | cut -d : -f2 | rev | cut -c 1- | rev\\\`&quot;
EOF
$ source .bash_profile 
$ btcblock
1804372/1804372</code></pre>
<blockquote>
<p>:link: <strong>TESTNET vs MAINNET:</strong> Remember that this
tutorial generally assumes that you are using testnet. If you’re using
the mainnet instead, you can retrieve the current block height with:
<code>wget -O - http://blockchain.info/q/getblockcount 2&gt;/dev/null</code>.
You can replace the latter half of the <code>btcblock</code> alias
(after <code>/</code>) with that.</p>
</blockquote>
<p>If you’re not up-to-date, but your <code>getblockcount</code> is
increasing, no problem. Total download time can take from an hour to
several hours, depending on your setup.</p>
<h2 id="optional-know-your-server-types">Optional: Know Your Server
Types</h2>
<blockquote>
<p><strong>TESTNET vs MAINNET:</strong> When you set up your node, you
choose to create it as either a Mainnet, Testnet, or Regtest node.
Though this document presumes a testnet setup, it’s worth understanding
how you might access and use the other setup types — even all on the
same machine! But, if you’re a first-time user, skip on past this, as
it’s not necessary for a basic setup.</p>
</blockquote>
<p>The type of setup is mainly controlled through the
~/.bitcoin/bitcoin.conf file. If you’re running testnet, it probably
contains this line:</p>
<pre><code>testnet=1</code></pre>
<p>If you’re running regtest, it probably contains this line:</p>
<pre><code>regtest=1</code></pre>
<p>However, if you want to run several different sorts of nodes
simultaneously, you should leave the testnet (or regtest) flag out of
your configuration file. You can then choose whether you’re using the
mainnet, the testnet, or your regtest every time you run bitcoind or
bitcoin-cli.</p>
<p>Here’s a set of aliases that would make that easier by creating a
specific alias for starting and stopping the bitcoind, for going to the
bitcoin directory, and for running bitcoin-cli, for each of the mainnet
(which has no extra flags), the testnet (which is -testnet), or your
regtest (which is -regtest).</p>
<pre><code>cat &gt;&gt; ~/.bash_profile &lt;&lt;EOF
alias bcstart=&quot;bitcoind -daemon&quot;
alias btstart=&quot;bitcoind -testnet -daemon&quot;
alias brstart=&quot;bitcoind -regtest -daemon&quot;

alias bcstop=&quot;bitcoin-cli stop&quot;
alias btstop=&quot;bitcoin-cli -testnet stop&quot;
alias brstop=&quot;bitcoin-cli -regtest stop&quot;

alias bcdir=&quot;cd ~/.bitcoin/&quot; #linux default bitcoin path
alias btdir=&quot;cd ~/.bitcoin/testnet&quot; #linux default bitcoin testnet path
alias brdir=&quot;cd ~/.bitcoin/regtest&quot; #linux default bitcoin regtest path

alias bc=&quot;bitcoin-cli&quot;
alias bt=&quot;bitcoin-cli -testnet&quot;
alias br=&quot;bitcoin-cli -regtest&quot;
EOF</code></pre>
<p>For even more complexity, you could have each of your ‘start’ aliases
use the -conf flag to load configuration from a different file. This
goes far beyond the scope of this tutorial, but we offer it as a
starting point for when your explorations of Bitcoin reaches the next
level.</p>
<h2 id="summary-verifying-your-bitcoin-setup">Summary: Verifying Your
Bitcoin Setup</h2>
<p>Before you start playing with bitcoin, you should make sure that your
aliases are set up, your bitcoind is running, and your blocks are
downloaded. You may also want to set up some access to alternative
Bitcoin setups, if you’re an advanced user.</p>
<h2 id="whats-next">What’s Next?</h2>
<p>Continue “Understanding Your Bitcoin Setup” with <a
href="03_2_Knowing_Your_Bitcoin_Setup.md">§3.2: Knowing Your Bitcoin
Setup</a>.</p>
</body>
</html>
